#!/bin/bash -e

BASEDIR=`dirname $0`/..
VENV=venv


if [ ! -d "$BASEDIR/$VENV" ]; then
    virtualenv -q $BASEDIR/$VENV --system-site-packages
    echo "virtualenv $VENV created."
fi
pip=$BASEDIR/$VENV/bin/pip


if [ ! -f "$BASEDIR/$VENV/updated" -o $BASEDIR/requirements.txt -nt $BASEDIR/$VENV/updated ]; then
    $pip install -r $BASEDIR/requirements.txt
    touch $BASEDIR/$VENV/updated
    echo "Requirements installed."
fi
